<div class="container my-4">
  <div class="row">
    <aside class="col-md-2 bg-light p-3">
      <ul class="list-unstyled">
        <li><i class="fa-solid fa-apple-whole"></i> Supermarket</li>
        <li><i class="fa-solid fa-shirt"></i> Fashion</li>
        <li><i class="fa-solid fa-paintbrush"></i> Health & Beauty</li>
        <li><i class="fa-solid fa-baby"></i> Baby Products</li>
        <li><i class="fa-solid fa-mobile-screen"></i> Phones & Tablets</li>
        <li><i class="fa-solid fa-house"></i> Home & Furniture</li>
        <li><i class="fa-solid fa-apple-whole"></i> Appliances</li>
        <li><i class="fa-solid fa-tv"></i> Televisions & Audio</li>
        <li><i class="fa-solid fa-laptop"></i> Computing</li>
        <li><i class="fa-solid fa-dumbbell"></i> Sporting Goods</li>
        <li><i class="fa-solid fa-gamepad"></i> Gaming</li>
        <li><i class="fa-solid fa-tags"></i> Other Categories</li>
      </ul>
    </aside>

    <!-- Filter and Products Section -->
    <div class="col-md-10">
      <!-- Filter Section -->
      <div class="row mb-4">
        <div class="col-md-3">
          <label for="categorySelect" class="form-label">Category</label>
          <select
            id="categorySelect"
            class="form-select"
            [(ngModel)]="selectedCategory"
            (change)="filterProducts()"
          >
            <option value="">All Categories</option>
            @for (category of categories; track category) {
            <option class="form-select">
              {{ category }}
            </option>
          }
          </select>
        </div>
        <div class="col-md-3">
          <label for="brandSelect" class="form-label">Brand</label>
          <select
            id="brandSelect"
            class="form-select"
            [(ngModel)]="selectedBrand"
            (change)="filterProducts()"
          >
            <option value="">All Brands</option>
            @for (brand of brands; track brand) {
            <option class="form-select" >
              {{ brand }}
            </option>
          }
          </select>
        </div>
        <div class="col-md-2">
          <label for="minPrice" class="form-label">Min Price</label>
          <input
            id="minPrice"
            type="number"
            class="form-control"
            [(ngModel)]="minPrice"
            (input)="filterProducts()"
          />
        </div>
        <div class="col-md-2">
          <label for="maxPrice" class="form-label">Max Price</label>
          <input
            id="maxPrice"
            type="number"
            class="form-control"
            [(ngModel)]="maxPrice"
            (input)="filterProducts()"
          />
        </div>
        <div class="col-md-2 align-self-end">
          <button class="btn btn-secondary w-100" (click)="resetFilters()">Reset Filters</button>
        </div>
      </div>


      <!-- Sorting Section -->
      <div class="row mb-4">
        <div class="col-md-4">
          <label for="sortSelect" class="form-label">Sort By</label>
          <select id="sortSelect" class="form-select" [(ngModel)]="selectedSort" (change)="sortProducts()">
            <option value="">Default</option>
            <option value="price">Price (Low to High)</option>
            <option value="priceDesc">Price (High to Low)</option>
            <option value="popularity">Popularity</option>
          </select>
        </div>
      </div>

      <!-- Products Section -->
      <section class="bg-light py-5">
        <div class="container">
          <div class="row">
            <h1 class="text-center mb-5">My Products</h1>
@for (product of filteredProducts; track $index) {
            <div class="col-md-4 mb-4" >
              <div class="card product-card shadow-sm">
                <img class="card-img-top img-fluid" [src]="product.photo" alt="{{ product.productName }}" />
                <div class="card-body">
                  <h5 class="card-title">{{ product.productName.split(' ').slice(0, 3).join(' ') }}</h5>
                  <p class="text-muted small">By John Smith</p>
                  <p class="card-text">
                    {{ product.description.split(' ').slice(0, 8).join(' ') }}...
                    <a [routerLink]="['/details', product.id]" class="text-warning">read more</a>
                  </p>
                  <div class="d-flex justify-content-between align-items-center">
                    <h4 class="text-primary">{{ product.price | currency: 'EUR' }}</h4>
                    <button class="btn btn-warning btn-sm" (click)="addToCart(product)">
                      <i class="fa-solid fa-cart-shopping"></i> Add to cart
                    </button>
                  </div>
                </div>
              </div>
            </div>
          }
            <!-- Pagination -->
            <div class="d-flex justify-content-center mt-4">
              <ul class="pagination">
                <!-- زر السابق -->
                <li class="page-item" [class.disabled]="currentPage === 1">
                  <button class="page-link" (click)="goToPage(currentPage - 1)">Previous</button>
                </li>
            
                <!-- أرقام الصفحات -->
                <li
                  class="page-item"
                  *ngFor="let page of totalPagesArray; trackBy: trackByPage"
                  [class.active]="currentPage === page"
                >
                  <button class="page-link" (click)="goToPage(page)">{{ page }}</button>
                </li>
            
                <!-- زر التالي -->
                <li class="page-item" [class.disabled]="currentPage === totalPages">
                  <button class="page-link" (click)="goToPage(currentPage + 1)">Next</button>
                </li>
              </ul>
            </div>
            
            
          </div>
        </div>
      </section>
    </div>
  </div>
</div>
